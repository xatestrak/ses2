local uis = game:GetService("UserInputService")
local rs = game:GetService("RunService")
local plr = game.Players.LocalPlayer

local ScreenGui = Instance.new("ScreenGui", plr:WaitForChild("PlayerGui"))
local Main = Instance.new("Frame", ScreenGui)
Main.Size, Main.Position, Main.BackgroundColor3, Main.Visible = UDim2.new(0,750,0,500), UDim2.new(0.5,-375,0.5,-250), Color3.fromRGB(30,30,30), true

-- Draggable
Main.Active = true
Main.Draggable = true

-- Top-left label
local lbl = Instance.new("TextLabel", Main)
lbl.Text, lbl.Position, lbl.Size, lbl.TextColor3, lbl.Font, lbl.TextScaled = "Eclipse", UDim2.new(0,10,0,10), UDim2.new(0,200,0,40), Color3.new(1,1,1), Enum.Font.SourceSansBold, true
local beta = Instance.new("TextLabel", Main)
beta.Text, beta.Position, beta.Size, beta.TextColor3, beta.Font, beta.TextScaled = "beta", UDim2.new(0,80,0,20), UDim2.new(0,50,0,20), Color3.fromRGB(200,200,200), Enum.Font.SourceSans, true

-- Tabs
local Tabs = {"Aimbot","Visual","Misc","Settings"}
local TabFrame = Instance.new("Frame", Main)
TabFrame.Size, TabFrame.Position, TabFrame.BackgroundColor3 = UDim2.new(0,100,1,0), UDim2.new(0,0,0,0), Color3.fromRGB(40,40,40)
local SelectedTab, SelectedSubtab = "Aimbot","General"

local Subtabs = {
    Aimbot = {"General","Other"},
    Visual = {"ESP","World","Other"},
    Misc = {"Misc"},
    Settings = {"Settings"}
}
local CheckboxStates = {}

for i,v in pairs(Tabs) do
    local b = Instance.new("TextButton", TabFrame)
    b.Text, b.Size, b.Position, b.BackgroundColor3 = v, UDim2.new(1,0,0,50), UDim2.new(0,0,0,(i-1)*50), Color3.fromRGB(50,50,50)
    b.MouseButton1Click:Connect(function() SelectedTab=v SelectedSubtab=Subtabs[v][1] end)
end

local SubtabFrame = Instance.new("Frame", Main)
SubtabFrame.Size, SubtabFrame.Position, SubtabFrame.BackgroundColor3 = UDim2.new(0,120,1,0), UDim2.new(0,100,0,0), Color3.fromRGB(35,35,35)

local ContentFrame = Instance.new("Frame", Main)
ContentFrame.Size, ContentFrame.Position, ContentFrame.BackgroundColor3 = UDim2.new(1,-220,1,0), UDim2.new(0,220,0,0), Color3.fromRGB(25,25,25)

local function Draw()
    SubtabFrame:ClearAllChildren()
    ContentFrame:ClearAllChildren()
    -- Subtabs
    for i,s in pairs(Subtabs[SelectedTab]) do
        local b = Instance.new("TextButton", SubtabFrame)
        b.Text, b.Size, b.Position, b.BackgroundColor3 = s, UDim2.new(1,0,0,40), UDim2.new(0,0,0,(i-1)*40), SelectedSubtab==s and Color3.fromRGB(70,70,70) or Color3.fromRGB(50,50,50)
        b.MouseButton1Click:Connect(function() SelectedSubtab=s end)
    end
    -- Checkboxes
    local y=0
    for i,s in pairs(Subtabs[SelectedTab]) do
        if s==SelectedSubtab then
            for j=1,3 do
                local cb = Instance.new("TextButton", ContentFrame)
                local name = s.."Option"..j
                CheckboxStates[name] = CheckboxStates[name] or false
                cb.Text, cb.Size, cb.Position = CheckboxStates[name] and "✅"..name or "❌"..name, UDim2.new(0,200,0,30), UDim2.new(0,10,0,y)
                cb.MouseButton1Click:Connect(function()
                    CheckboxStates[name] = not CheckboxStates[name]
                end)
                y=y+35
            end
        end
    end
end
rs.RenderStepped:Connect(Draw)

-- Toggle and delete
uis.InputBegan:Connect(function(input,gpe)
    if gpe then return end
    if input.KeyCode==Enum.KeyCode.Insert then Main.Visible=not Main.Visible
    elseif input.KeyCode==Enum.KeyCode.Delete then ScreenGui:Destroy() end
end)
